<!--pages/subPages/refuel/refuel.wxml-->
<view class="box">
  <view class="top-box">
    <navigator hover-class="none" url="/pages/subPages/refuel/search?searchStr={{searchStr}}">
      <view class="search-box" disabled>
        <searchInput
          disabled
          value="{{searchStr}}"
          placeHolder="搜索附近的加油站">
        </searchInput>
      </view>
    </navigator>
    <!-- <view class="select-box" bindtap="selectBtn">
      <view class="select-item" data-tab="distance">
        <text class="select-text stopTap">{{tabValue.distance}}</text>
        <iconfont class="stopTap" size="20rpx" icon="arrow-down"></iconfont>
      </view>
      <view class="select-item" data-tab="oil">
        <text class="select-text stopTap">{{tabValue.oil}}</text>
        <iconfont class="stopTap" size="20rpx" icon="arrow-down"></iconfont>
      </view>
      <view class="select-item" data-tab="other">
        <text class="select-text stopTap">{{tabValue.other}}</text>
        <iconfont class="stopTap" size="20rpx" icon="arrow-down"></iconfont>
      </view>
    </view> -->
    <van-sticky>
      <view class="select-box">
        <van-dropdown-menu active-color="#447fff">
          <van-dropdown-item bind:change="selectBtn" model:value="{{ distance }}" options="{{ distanceOption }}" />
          <van-dropdown-item bind:change="selectBtn" model:value="{{ oil }}" options="{{ oilOption }}" />
          <van-dropdown-item bind:change="selectBtn" model:value="{{ other }}" options="{{ otherOption }}">
          </van-dropdown-item>
        </van-dropdown-menu>
      </view>
    </van-sticky>
  </view>
  <view class="content-box">
    <view class="card-box">
      <view class="card-item" wx:for="{{list}}" wx:key="index">
        <navigator url="./oilDetail?id={{item.orgId}}&distance={{item.distance}}&lat={{item.latitude}}&lon={{item.longitude}}">
          <business-card
            src="{{item.urlIcon}}"
            title="{{item.orgName}}"
            subTitleRight="{{item.distance + 'km'}}"
            subTitle="{{item.address}}"
            oldPrice="{{item.price}}"
            newPrice="{{item.discountPrice}}">
            <iconfont slot="suffixIcon" icon="navigator" size="38rpx" color="#447fff" catchtap="navigatorBtn"></iconfont>
            <view slot="foot" style="padding-left:140rpx;display:flex">
              <view style="padding-right:10rpx;" wx:for="{{item.tagList}}" wx:key="item">
                <van-tag plain type="primary">{{item}}</van-tag>
              </view>
              <van-tag wx:if="{{item.businessTimeBucketType}}" plain>{{item.businessTimeBucketType}}</van-tag>
            </view>
          </business-card>
        </navigator>
      </view>
      <view class="has-more" wx:if="{{list.length > 0}}">{{hasMore ? '上拉加载更多' : '~到底啦~'}}</view>
      <view wx:else>
        <nodata>暂无数据</nodata>
      </view>
    </view> 
  </view>
</view>
<!-- 显示遮罩 -->
<van-overlay z-index="99" show="{{ showMask }}" bind:click="onClickHide">
  <view class="wrap">
    <view class="inner-box">
      <view class="inner-title">请选择常用油标号</view>
      <van-radio-group value="{{ currentOilSelection }}">
        <van-cell-group>
          <van-cell
            wx:for="{{oilOption}}"
            wx:key="value"
            title="{{item.text}}"
            clickable
            border="{{index != (oilOption.length-1)}}"
            data-name="{{item.value}}"
            bind:click="masktabclick">
            <van-radio slot="right-icon" name="{{item.value}}" />
          </van-cell>
        </van-cell-group>
      </van-radio-group>
    </view>
  </view>
</van-overlay>