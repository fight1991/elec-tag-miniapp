<!--pages/subPages/refuel/refuel.wxml-->
<view class="box">
  <view class="top-box">
    <navigator hover-class="none" url="/pages/subPages/refuel/search?searchStr={{searchStr}}">
      <view class="search-box" disabled>
        <searchInput
          disabled
          value="{{searchStr}}"
          placeHolder="搜索附近的加油站">
        </searchInput>
      </view>
    </navigator>
    <!-- 活动轮播 -->
    <banner bannerId="{{bannerId}}"></banner>
    <!-- 筛选 -->
    <view class="select-box">
      <dropdown-menu>
        <dropdown-item bind:change="selectBtn" model:value="{{ distance }}" options="{{ distanceOption }}" />
        <dropdown-item bind:change="selectBtn" model:value="{{ oil }}" options="{{ oilOption }}" />
        <dropdown-item bind:change="selectBtn" model:value="{{ other }}" options="{{ otherOption }}"/>
      </dropdown-menu>
    </view>
  </view>
  <view class="content-box">
    <pull-refresh
      height="100%"
      model:count="{{total}}"
      model:hasMore="{{hasMore}}"
      bind:pullDown="initList"
      bind:reachBottom="upperList"
      model:isRefresh="{{collapse}}">
      <view class="card-box">
        <view class="card-item" wx:for="{{list}}" wx:key="index">
          <navigator url="./oilDetail?oil={{oil}}&id={{item.orgId}}&distance={{item.distance}}&lat={{item.latitude}}&lon={{item.longitude}}">
            <business-card
              src="{{item.urlIcon}}"
              row1Title="{{item.orgName}}"
              lat="{{item.latitude}}"
              lng="{{item.longitude}}"
              row2Title="{{item.address}}"
              row2Suffix="{{item.distance + 'km'}}">
              <view slot="row3">
                <new-old-price oldPrice="{{item.discountPrice}}" newPrice="{{item.price}}"></new-old-price>
              </view>
              <view slot="row4">
                <tag-group showTimer="{{item.businessTimeBucketType == 1}}" orgTags="{{item.orgTags}}"></tag-group>
              </view>
            </business-card>
          </navigator>
        </view>
      </view> 
    </pull-refresh>
  </view>
</view>
<!-- 显示遮罩 -->
<van-overlay z-index="99" show="{{ showMask }}" bind:click="onClickHide">
  <view class="wrap">
    <view class="inner-box">
      <view class="inner-title">请选择常用油标号</view>
      <van-radio-group value="{{ currentOilSelection }}">
        <van-cell-group>
          <van-cell
            wx:for="{{oilOption}}"
            wx:key="value"
            title="{{item.text}}"
            clickable
            border="{{index != (oilOption.length-1)}}"
            data-name="{{item.value}}"
            bind:click="masktabclick">
            <van-radio slot="right-icon" name="{{item.value}}" />
          </van-cell>
        </van-cell-group>
      </van-radio-group>
    </view>
  </view>
</van-overlay>